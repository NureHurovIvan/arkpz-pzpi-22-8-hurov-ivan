# Автосистема - Документація API

## Опис проєкту

Автосистема – це програмна система для моніторингу стану автомобілів з використанням IoT сенсорів. Система надає можливість користувачам відслідковувати технічний стан своїх автомобілів, отримувати сповіщення про необхідність технічного обслуговування та інші важливі оновлення через мобільний додаток або веб-інтерфейс. Користувачі можуть бути розподілені за ролями (користувач або адміністратор), що визначає доступ до певних функцій системи.

## Функціонал

### Авторизація
- Реалізована авторизація за допомогою JWT токенів.
- Токени зберігаються у HTTP cookie при успішній авторизації.
- Маршрути для входу (login) та виходу (logout).

### Користувачі
- Реєстрація та авторизація користувачів.
- Перегляд профілю користувача.
- Можливість для адміністратора переглядати список усіх користувачів.

### Автомобілі
- Додавання та видалення автомобілів.
- Перегляд списку автомобілів користувача.
  
### Обслуговування
- Додавання записів про технічне обслуговування.
- Перегляд історії обслуговування автомобілів.

### Сповіщення
- Оповіщення про необхідність технічного обслуговування та інші важливі події.

### Адміністративні функції
- Керування ролями користувачів (адміністратор може змінювати ролі користувачів).

## Технології

- **Платформа**: Node.js
- **Мова програмування**: JavaScript (ES6+)
- **СУБД**: MongoDB
- **ORM**: Mongoose
- **Автентифікація**: JWT
- **Документація API**: Swagger
- **Мобільний додаток**: Kotlin

## Вимоги

### Середовище виконання:
- Node.js версія 16 або вище.
- MongoDB.

### Бібліотеки та залежності:
- `express`: для створення серверних маршрутів.
- `mongoose`: для роботи з MongoDB.
- `jsonwebtoken`: для генерації та перевірки JWT токенів.
- `cookie-parser`: для роботи з cookies.
- `swagger-jsdoc` і `swagger-ui-express`: для документування API через Swagger.
- `dotenv`: для зберігання конфіденційних даних (наприклад, секрети JWT).

## Налаштування

1. **Налаштування бази даних**
   - Створіть базу даних MongoDB та підключіть її до вашої програми за допомогою Mongoose.
   - Для підключення вкажіть строку підключення в файлі `.env`:
     ```
     MONGODB_URI=mongodb://your_database_url
     ```

2. **Налаштування JWT**
   - Встановіть секрет для підпису JWT у файлі `.env`:
     ```
     JWT_SECRET=your_jwt_secret_key
     ```

3. **Налаштування Swagger**
   - Для автоматичної генерації документації API за допомогою Swagger, налаштуйте `swagger-jsdoc` і `swagger-ui-express`.

## Використання

### Запуск серверу
1. Клонувати репозиторій:
   ```bash
   git clone https://github.com/NureHurovIvan/arkpz-pzpi-22-8-hurov-ivan.git
   ```
2. Перейдіть до директорії проєкту:
   ```
   cd arkpz-pzpi-22-8-hurov-ivan
   ```
3. Встановіть залежності:
   ```
   npm install
   ```
4. Запустіть сервер:
```
npm start
```

Приклади запитів
Реєстрація користувача
- Метод: `POST`
- Маршрут: `/api/users/register`
- Опис: Реєстрація нового користувача.

Авторизація користувача
- Метод: `POST`
- Маршрут: `/api/users/login`
- Опис: Авторизація користувача та отримання JWT токену.

Додавання автомобіля
- Метод: `POST`
- Маршрут: `/api/vehicles`
- Опис: Додавання нового автомобіля.

Видалення автомобіля
- Метод: `DELETE`
- Маршрут: `/api/vehicles/:vehicle_id`
- Опис: Видалення автомобіля за ідентифікатором.

Додавання запису обслуговування
- Метод: `POST`
- Маршрут: `/api/maintenance`
- Опис: Додавання запису про технічне обслуговування для автомобіля.

Примітки
- Кожен запит до захищених маршрутів повинен містити валідний JWT токен у cookie.
- Логіка адміністрування реалізована через middleware, що дозволяє адміністратору управляти ролями користувачів.
  
Контакти  
Розробник: Гуров Іван  
Email: `ivan.hurov@nure.ua`
